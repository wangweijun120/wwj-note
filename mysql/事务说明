
事务：

mysql的事务隔离级别 rr中是通过mvcc以及next-key lock防止幻读的

1.在rr级别下如果select语句后面不加lock in share mode 或者 for update 即为快照读；
2.如果加了lock in share mode 即为当前读，会对当前读取的语句行添加next-key lock的S锁， 即记录锁和间隙锁，
 锁住当前查询范围，以及当前查询范围下一个区间的数据行，其他事务可以读取锁住的数据行但不能够修改，否则会被阻塞;
3.如果加了 for update 和2唯一的区别是加X锁，锁住的数据行其他事务既不能修改也不能读取


索引：
 
 mysql复合索引最左匹配原则：
    如果建立索引(a,b,c) 相当于建立了(a),(a,b),(a,b,c)三个索引
    注意：查询语句遇到范围查询后续将不再使用索引 比如建立(a,b,c)复合索引，对于 where a =1 and c =2 and b >100 只能够用到(a,b)索引，c用不到索引

 B+ 树索引相比B树索引的优点：
  1.由于非叶子节点只是存储导航信息，没有存储数据，所以一个磁盘块可以存储更多的非叶子节点，有利于减少磁盘IO
  2.叶子节点之间由指针顺序连接，有利于范围查询
 
 其他：
  1.如果在索引行上调用sql函数将会导致该行不能使用索引
  2.数据库中可以存放一个单调递增的版本号来实现简单的乐观锁，更新语句为update table set col1 =  new_value where version_id = ? and ....

